!!! 5
%html{:xmlns => "http://www.w3.org/1999/xhtml", "xml:lang" => "en", :lang => "en"}
  %head
    %meta{"http-equiv" => "X-UA-Compatible", :content=>"IE=edge; charset=utf-8"}
    %meta{:name => "viewport", :content => "width=device-width; initial-scale=1"}
    %meta{:name => "robots", :content => "none"}
    %meta{:name => "description", :content => "Electronic Music"}
    %script{:src=>"/js/jquery-1.11.2.min.js", :type=>"text/javascript"}
    %script{:src=>"/js/bootstrap.min.js", :type=>"text/javascript"}
    %script{:src=>"/js/wavesurfer.min.js", :type=>"text/javascript"}
    %link{:href=>"/css/bootstrap.min.css", :rel=>"stylesheet"}
    %link{:href=>"/css/offcanvas.css", :rel=>"stylesheet"}
    %link{:href=>"/css/style.css", :rel=>"stylesheet"}

    %title alfadeo pipeline
    
  %body{:style=>"background-color:#EFEFEF;"}
    %nav.navbar.navbar-fixed-top.navbar-inverse
      %div.container-fluid
        %div.navbar-header
          %button{:class=>"navbar-toggle collapsed", :aria=>{:controls=>"navbar", :expanded=>"false"}, :data=>{:target=>"#navbar", :toggle=>"collapse"}}
            %span{:class=>"sr-only"} Toggle navigation
            %span{:class=>"icon-bar"}
            %span{:class=>"icon-bar"}
            %span{:class=>"icon-bar"}
      %div{:id=>"navbar", :class=>"navbar-collapse collapse", :aria=>{:expanded=>"false"}, :style=>"height: 1px;"} 
        %ul.nav.navbar-nav
          %li{:class => ("selected" if /overview|\/$/ =~ request.path) }
            %a{ :href => "/overview"}
              %span.white.glyphicon.glyphicon-list-alt
                overview
          %li{:class => ("selected" if /upload|\/$/ =~ request.path)}
            %a{ :href => "/upload"}
              %span.white.glyphicon.glyphicon-upload
                upload
          %li{:class => ("selected" if /links|\/$/ =~ request.path)}
            %a{ :href => "/links"}
              %span.white.glyphicon.glyphicon-eye-open
                links
          %li.dropdown
            %a.dropdown-toggle{:type=>"button", :id=>"menu1", :data=>{:toggle=>"dropdown"}, :style=>"color:white;cursor:pointer;"}
              User Favs
              %span.white.caret
            %ul.dropdown-menu{:role=>"menu", :aria=>{:labelledby=>"menu1"}}
              %li{:role=>"presentation"}
                %a{:role=>"menuitem", :tabindex=>"-1", :href=>"/s"} S
              %li{:role=>"presentation"}
                %a{:role=>"menuitem", :tabindex=>"-1", :href=>"/c"} C
              %li{:role=>"presentation"}
                %a{:role=>"menuitem", :tabindex=>"-1", :href=>"/d"} D
              %li{:role=>"presentation"}
                %a{:role=>"menuitem", :tabindex=>"-1", :href=>"/n"} N

        %ul.nav.navbar-nav.navbar-right{:style=>"margin-right:1em;"}
          %li
            %a{ :href => "/" }
              = "#{(session[:user] ? session[:user] : "???")}"
              %span.white.glyphicon.glyphicon-user
    %div.container-fluid
      = yield
    #current-track{:style => "z-index:100;position:fixed;bottom:10px;right:50px;cursor:pointer;"}
      %span.glyphicon.glyphicon-bullhorn
    #back-top{:style => "z-index:100;position:fixed;bottom:10px;right:10px;cursor:pointer;"}
      %span.glyphicon.glyphicon-circle-arrow-up{:style => "font-size:2em;color:orange;"}

    :javascript
      $("#current-track").hide();
      $(function () {
        $(window).scroll(function () {
          if ( active !== "") {
            $('#current-track').fadeIn();
          } else {
            $('#current-track').fadeOut();
          }
        });
        // scroll body to 0px on click
        $('#current-track').click(function () {
          $('body,html').animate({
            scrollTop: $(active).offset().top -300
          }, 500);
          return false;
        });
      });
      $("#back-top").hide();
      $(function () {
        $(window).scroll(function () {
          if ($(this).scrollTop() > 1000) {
            $('#back-top').fadeIn();
          } else {
            $('#back-top').fadeOut();
          }
        });
        // scroll body to 0px on click
        $('#back-top').click(function () {
          $('body,html').animate({
            scrollTop: 0
          }, 500);
          return false;
        });
      });
  
